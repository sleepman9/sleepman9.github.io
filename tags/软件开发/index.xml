<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>è½¯ä»¶å¼€å‘ on UNO's Page</title><link>https://sleepman9.github.io/tags/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/</link><description>Recent content in è½¯ä»¶å¼€å‘ on UNO's Page</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Fri, 18 Apr 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://sleepman9.github.io/tags/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/index.xml" rel="self" type="application/rss+xml"/><item><title>è½¯ä»¶å¼€å‘â€”â€”ç¼–è¯‘</title><link>https://sleepman9.github.io/p/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E7%BC%96%E8%AF%91/</link><pubDate>Fri, 18 Apr 2025 00:00:00 +0000</pubDate><guid>https://sleepman9.github.io/p/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E7%BC%96%E8%AF%91/</guid><description>&lt;blockquote&gt;
&lt;p&gt;ä¼Ÿå¤§çš„UNOä¸€èˆ¬ä¼šé—®å‡ ä¸ªä¸ºä»€ä¹ˆï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="qa"&gt;QA
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Qï¼šä¸ºä»€ä¹ˆè¦ç¼–è¯‘æˆåŠ¨æ€åº“&lt;/p&gt;
&lt;p&gt;A:ä¸ºäº†&lt;strong&gt;èŠ‚çœèµ„æºã€æ–¹ä¾¿æ›´æ–°ã€æ”¯æŒæ¨¡å—åŒ–å’Œè·¨è¯­è¨€è°ƒç”¨&lt;/strong&gt;ï¼Œè¿˜èƒ½å®ç°æ’ä»¶å¼æ¶æ„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Q: CMakeçš„æ„å»ºå’Œç¼–è¯‘&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Qï¼šæ€ä¹ˆé€šè¿‡errorä¿¡æ¯å®šä½è§£å†³&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="åŠ¨æ€åº“"&gt;åŠ¨æ€åº“
&lt;/h2&gt;&lt;h3 id="åŸºæœ¬æ¦‚å¿µ"&gt;åŸºæœ¬æ¦‚å¿µ
&lt;/h3&gt;&lt;p&gt;åŠ¨æ€åº“å°±æ˜¯ &lt;code&gt;.so&lt;/code&gt;ï¼ˆLinuxï¼‰ã€&lt;code&gt;.dll&lt;/code&gt;ï¼ˆWindowsï¼‰ã€&lt;code&gt;.dylib&lt;/code&gt;ï¼ˆmacOSï¼‰ è¿™æ ·çš„æ–‡ä»¶ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶è¢«â€œåŠ¨æ€åŠ è½½â€ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒè·Ÿ &lt;strong&gt;é™æ€åº“&lt;/strong&gt;ï¼ˆ&lt;code&gt;.a&lt;/code&gt; æˆ– &lt;code&gt;.lib&lt;/code&gt;ï¼‰çš„åŒºåˆ«åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é™æ€åº“æ˜¯&lt;strong&gt;ç¼–è¯‘æ—¶å°±åµŒå…¥ç¨‹åºé‡Œ&lt;/strong&gt;çš„ï¼Œç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶æ¯”è¾ƒå¤§ã€‚&lt;/li&gt;
&lt;li&gt;åŠ¨æ€åº“æ˜¯&lt;strong&gt;è¿è¡Œæ—¶æ‰åŠ è½½&lt;/strong&gt;çš„ï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä¼šâ€œå¼•ç”¨â€è¿™ä¸ªåº“ï¼Œè€Œä¸æ˜¯åŒ…å«å®ƒæœ¬ä½“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;âœ… ä¸ºä»€ä¹ˆç¼–è¯‘æˆåŠ¨æ€åº“ï¼Ÿæœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ
&lt;strong&gt;èŠ‚çœå†…å­˜å’Œç£ç›˜ç©ºé—´&lt;/strong&gt;
å¤šä¸ªç¨‹åºéƒ½èƒ½ä½¿ç”¨åŒä¸€ä¸ªåŠ¨æ€åº“ï¼Œæ¯”å¦‚ç³»ç»Ÿçš„ libc.soã€OpenCVã€Qt è¿™äº›å¸¸ç”¨åº“ï¼Œä¸ç”¨æ¯ä¸ªç¨‹åºéƒ½å„è‡ªç¼–è¯‘ä¸€ä»½ï¼ŒèŠ‚çœèµ„æºã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;æ”¯æŒæ¨¡å—åŒ–è®¾è®¡&lt;/strong&gt;
ç¨‹åºå¯ä»¥æŠŠåŠŸèƒ½æ‹†æˆå¤šä¸ªæ¨¡å—ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªä¸»ç¨‹åºï¼ˆmain appï¼‰&lt;/li&gt;
&lt;li&gt;ä¸€äº›æ’ä»¶/åŠŸèƒ½æ¨¡å—ï¼ˆç¼–è¯‘æˆåŠ¨æ€åº“ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ ·è®¾è®¡æ›´çµæ´»ã€æ›´æ˜“ç»´æŠ¤ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;æ”¯æŒâ€œçƒ­æ›´æ–°â€æˆ–â€œçƒ­æ’æ‹”â€&lt;/strong&gt;
å½“ä½ æƒ³æ›´æ–°æŸä¸ªæ¨¡å—çš„åŠŸèƒ½ï¼Œåªéœ€è¦æ›¿æ¢æ‰å¯¹åº”çš„åŠ¨æ€åº“ï¼Œè€Œä¸ç”¨é‡æ–°ç¼–è¯‘æ•´ä¸ªç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ’ä»¶æœºåˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Python çš„ &lt;code&gt;.pyd&lt;/code&gt; æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;MATLAB çš„ MEX åŠ¨æ€åº“&lt;/li&gt;
&lt;li&gt;æµè§ˆå™¨çš„æ‰©å±•æ’ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›éƒ½æ˜¯é€šè¿‡åŠ¨æ€åº“çš„å½¢å¼æ‰©å±•ä¸»ç¨‹åºçš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;è·¨è¯­è¨€è°ƒç”¨&lt;/strong&gt;
å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ç”¨ C/C++ å†™ä¸€ä¸ªé«˜æ€§èƒ½çš„æ ¸å¿ƒæ¨¡å—ï¼Œç„¶å Pythonã€Java ç­‰å…¶ä»–è¯­è¨€ç”¨ FFIï¼ˆForeign Function Interfaceï¼‰ è°ƒç”¨è¿™äº›åº“ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Python é€šè¿‡ ctypes åŠ è½½ .so æˆ– .dll&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;ctypes&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;cdll&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;lib&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cdll&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LoadLibrary&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;./libexample.so&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h3 id="æ€ä¹ˆç”ŸæˆåŠ¨æ€åº“é“¾æ¥ä½¿ç”¨åŠ¨æ€åº“"&gt;æ€ä¹ˆç”ŸæˆåŠ¨æ€åº“ï¼Œé“¾æ¥ä½¿ç”¨åŠ¨æ€åº“
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;æºä»£ç &lt;/li&gt;
&lt;li&gt;ç¼–è¯‘ç”ŸæˆåŠ¨æ€åº“&lt;/li&gt;
&lt;li&gt;å†™ä¸»ç¨‹åº&lt;/li&gt;
&lt;li&gt;ç¼–è¯‘ä¸»ç¨‹åºæ—¶é“¾æ¥åŠ¨æ€åº“&lt;/li&gt;
&lt;li&gt;è¿è¡Œä¸»ç¨‹åº&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¤ªå¥½äº†ï¼Œæˆ‘ä»¬å°±ç”¨æœ€å¸¸è§çš„ &lt;strong&gt;C/C++&lt;/strong&gt; æ¥ä¸¾ä¸ªä¾‹å­ï¼Œå±•ç¤ºä¸€ä¸‹ &lt;strong&gt;æ€ä¹ˆç¼–è¯‘ç”ŸæˆåŠ¨æ€åº“&lt;/strong&gt;ï¼ˆä»¥ Linux ä¸‹ä¸ºä¾‹ï¼Œä¹Ÿä¼šé¡ºä¾¿è¯´ä¸‹ Windows å’Œ macOS çš„å·®å¼‚ï¼‰ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id="åˆ›å»ºæºä»£ç æ–‡ä»¶"&gt;åˆ›å»ºæºä»£ç æ–‡ä»¶
&lt;/h4&gt;&lt;p&gt;ğŸ‘‰ åŠ¨æ€åº“æºæ–‡ä»¶ï¼š&lt;code&gt;mymath.c&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// mymath.c
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;say_hello&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nf"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;Hello from dynamic library!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ğŸ‘‰ å¤´æ–‡ä»¶ï¼š&lt;code&gt;mymath.h&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// mymath.h
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#ifndef MYMATH_H
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#define MYMATH_H
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;say_hello&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#endif
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id="-2-ç¼–è¯‘ç”ŸæˆåŠ¨æ€åº“"&gt;ğŸ› ï¸ 2. ç¼–è¯‘ç”ŸæˆåŠ¨æ€åº“
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;Linux / macOSï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gcc -fPIC -shared -o libmymath.so mymath.c
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è§£é‡Šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-fPIC&lt;/code&gt;ï¼šç”Ÿæˆä½ç½®æ— å…³ä»£ç ï¼ˆPosition Independent Codeï¼‰ï¼ŒåŠ¨æ€åº“éœ€è¦è¿™ä¸ª&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-shared&lt;/code&gt;ï¼šå‘Šè¯‰ç¼–è¯‘å™¨è¦ç”Ÿæˆå…±äº«åº“&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-o libmymath.so&lt;/code&gt;ï¼šè¾“å‡ºæ–‡ä»¶åï¼Œ&lt;code&gt;lib&lt;/code&gt; å¼€å¤´æ˜¯ä¹ æƒ¯å‘½åæ–¹å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Windowsï¼ˆä½¿ç”¨ MinGWï¼‰ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gcc -shared -o mymath.dll mymath.c
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id="-3-å†™ä¸»ç¨‹åºè°ƒç”¨å®ƒmainc"&gt;ğŸ§ª 3. å†™ä¸»ç¨‹åºè°ƒç”¨å®ƒï¼š&lt;code&gt;main.c&lt;/code&gt;
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;span class="lnt"&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// main.c
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;#34;mymath.h&amp;#34;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nf"&gt;say_hello&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nf"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;3 + 5 = %d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id="-4-ç¼–è¯‘ä¸»ç¨‹åºæ—¶é“¾æ¥åŠ¨æ€åº“"&gt;ğŸ—ï¸ 4. ç¼–è¯‘ä¸»ç¨‹åºæ—¶é“¾æ¥åŠ¨æ€åº“
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gcc -o main main.c -L. -lmymath
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è§£é‡Šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-L.&lt;/code&gt; è¡¨ç¤ºåœ¨å½“å‰ç›®å½•æ‰¾åº“&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-lmymath&lt;/code&gt; è¡¨ç¤ºé“¾æ¥åä¸º &lt;code&gt;libmymath.so&lt;/code&gt; çš„åº“ï¼ˆ&lt;code&gt;lib&lt;/code&gt; å¼€å¤´çœç•¥ï¼Œ&lt;code&gt;.so&lt;/code&gt; åç¼€çœç•¥ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id="-5-è¿è¡Œç¨‹åºlinux"&gt;ğŸƒ 5. è¿è¡Œç¨‹åºï¼ˆLinuxï¼‰
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;LD_LIBRARY_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;. ./main
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;LD_LIBRARY_PATH=.&lt;/code&gt; æ˜¯å‘Šè¯‰ç³»ç»ŸåŠ¨æ€åº“å°±æ”¾åœ¨å½“å‰ç›®å½•&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;ğŸ‰ &lt;strong&gt;è¾“å‡ºç»“æœ&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Hello from dynamic library!
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;3 + 5 = 8
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;âœ… &lt;strong&gt;å°ç»“ä¸€æ³¢&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ­¥éª¤&lt;/th&gt;
&lt;th&gt;å‘½ä»¤æˆ–æ“ä½œ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;å†™åº“ä»£ç &lt;/td&gt;
&lt;td&gt;&lt;code&gt;mymath.c&lt;/code&gt;ã€&lt;code&gt;mymath.h&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ç¼–è¯‘åº“&lt;/td&gt;
&lt;td&gt;&lt;code&gt;gcc -fPIC -shared -o libmymath.so mymath.c&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å†™ä¸»ç¨‹åº&lt;/td&gt;
&lt;td&gt;&lt;code&gt;main.c&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ç¼–è¯‘ä¸»ç¨‹åº&lt;/td&gt;
&lt;td&gt;&lt;code&gt;gcc -o main main.c -L. -lmymath&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;è¿è¡Œç¨‹åº&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LD_LIBRARY_PATH=. ./main&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="cmake"&gt;CMake
&lt;/h2&gt;&lt;p&gt;CMake æ˜¯ä¸€ä¸ª è·¨å¹³å°çš„è‡ªåŠ¨åŒ–æ„å»ºç³»ç»Ÿå·¥å…·ï¼Œå®ƒä½¿ç”¨ä¸€ç§ç§°ä¸º CMakeLists.txt çš„é…ç½®æ–‡ä»¶æ¥æè¿°å¦‚ä½•ç”Ÿæˆé¡¹ç›®çš„æ„å»ºæ–‡ä»¶ï¼ˆä¾‹å¦‚ Makefile æˆ– Visual Studio å·¥ç¨‹ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ„å»ºæ–‡ä»¶ä¸­æœ‰ç¼–è¯‘å‘½ä»¤GCC,G++ç­‰ï¼›ç¼–è¯‘ç¨‹åºï¼›&lt;/p&gt;
&lt;h3 id="åŸºæœ¬æ¦‚å¿µ-1"&gt;åŸºæœ¬æ¦‚å¿µ
&lt;/h3&gt;&lt;h4 id="-cmake-çš„åŸºæœ¬æ„å»ºæµç¨‹"&gt;ğŸ“ CMake çš„åŸºæœ¬æ„å»ºæµç¨‹
&lt;/h4&gt;&lt;p&gt;CMake çš„æ„å»ºè¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®ï¼ˆConfigureï¼‰é˜¶æ®µ&lt;/strong&gt;
è¿™ä¸€é˜¶æ®µçš„ç›®æ ‡æ˜¯ç”Ÿæˆå¹³å°ç›¸å…³çš„æ„å»ºæ–‡ä»¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cmake -S . -B build
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-S .&lt;/code&gt; æŒ‡å®šæºç è·¯å¾„&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-B build&lt;/code&gt; æŒ‡å®šç”Ÿæˆçš„æ„å»ºæ–‡ä»¶æ”¾åœ¨å“ªä¸ªç›®å½•ï¼ˆå¯ä»¥å« &lt;code&gt;build&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ­¤æ—¶ï¼ŒCMake ä¼šè¯»å– &lt;code&gt;CMakeLists.txt&lt;/code&gt;ï¼Œæ ¹æ®ç³»ç»Ÿç¯å¢ƒã€ç¼–è¯‘å™¨ç­‰ç”Ÿæˆåˆé€‚çš„æ„å»ºç³»ç»Ÿï¼ˆæ¯”å¦‚ Makefileï¼‰ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;ol start="2"&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºï¼ˆBuildï¼‰é˜¶æ®µ&lt;/strong&gt;
ä½¿ç”¨ä¸Šä¸€æ­¥ç”Ÿæˆçš„æ„å»ºæ–‡ä»¶ï¼Œå¼€å§‹çœŸæ­£çš„&lt;strong&gt;ç¼–è¯‘&lt;/strong&gt;æ“ä½œã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cmake --build build
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™ä¸€æ­¥ç­‰ä»·äºæ‰§è¡Œ &lt;code&gt;make&lt;/code&gt;ï¼ˆå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Unix/Linux ä¸Šçš„é»˜è®¤ç”Ÿæˆå™¨ï¼‰ï¼Œå°†æºä»£ç ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶æˆ–è€…åº“ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id="-cmakeliststxt-åŸºç¡€ç»“æ„"&gt;ğŸ“œ CMakeLists.txt åŸºç¡€ç»“æ„
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-cmake" data-lang="cmake"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cmake_minimum_required&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;VERSION&lt;/span&gt; &lt;span class="s"&gt;3.10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;project&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;MyProject&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# æŒ‡å®š C++ æ ‡å‡†
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;CMAKE_CXX_STANDARD&lt;/span&gt; &lt;span class="s"&gt;17&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# æ·»åŠ æºæ–‡ä»¶å¹¶æ„å»ºæˆå¯æ‰§è¡Œæ–‡ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;add_executable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;my_app&lt;/span&gt; &lt;span class="s"&gt;main.cpp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;project(...)&lt;/code&gt;ï¼šå®šä¹‰é¡¹ç›®åç§°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set(...)&lt;/code&gt;ï¼šè®¾ç½®å˜é‡ï¼Œæ¯”å¦‚ C++ æ ‡å‡†&lt;/li&gt;
&lt;li&gt;&lt;code&gt;add_executable(...)&lt;/code&gt;ï¼šæŒ‡å®šç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶çš„ç›®æ ‡&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;ğŸ” &lt;strong&gt;å¸¸è§å‘½ä»¤ä¸€è§ˆ&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ“ä½œ&lt;/th&gt;
&lt;th&gt;å‘½ä»¤ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;é…ç½®&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cmake -S . -B build&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ„å»º&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cmake --build build&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ¸…é™¤æ„å»ºç›®å½•&lt;/td&gt;
&lt;td&gt;&lt;code&gt;rm -rf build&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;è®¾ç½®ç¼–è¯‘å™¨&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CC=gcc CXX=g++ cmake -S . -B build&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;å°æŠ€å·§&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å§‹ç»ˆå°†æ„å»ºç›®å½•å’Œæºä»£ç ç›®å½•åˆ†ç¦»ï¼ˆOut-of-Source Buildï¼‰ï¼Œä¾¿äºç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥åŠ ä¸Š &lt;code&gt;-DCMAKE_BUILD_TYPE=Release&lt;/code&gt; æˆ– &lt;code&gt;Debug&lt;/code&gt; æ¥æ§åˆ¶ç¼–è¯‘ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;target_include_directories&lt;/code&gt; å’Œ &lt;code&gt;target_link_libraries&lt;/code&gt; æ¥ç®¡ç†ä¾èµ–æ›´æ¸…æ™°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="åº”ç”¨"&gt;åº”ç”¨
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ CMake æ¥æ„å»ºä¸Šè¿°å°é¡¹ç›®ï¼šç”ŸæˆåŠ¨æ€åº“ &lt;code&gt;libmymath.so&lt;/code&gt;ï¼Œå¹¶ç¼–è¯‘ä¸»ç¨‹åº &lt;code&gt;main.c&lt;/code&gt; æ¥è°ƒç”¨å®ƒã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id="é¡¹ç›®ç»“æ„"&gt;é¡¹ç›®ç»“æ„
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;my_project/
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”œâ”€â”€ CMakeLists.txt
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”œâ”€â”€ mymath.c
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”œâ”€â”€ mymath.h
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â””â”€â”€ main.c
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id="cmakeliststxt-å†…å®¹"&gt;CMakeLists.txt å†…å®¹
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-cmake" data-lang="cmake"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cmake_minimum_required&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;VERSION&lt;/span&gt; &lt;span class="s"&gt;3.10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;project&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;MyDynamicLibExample&lt;/span&gt; &lt;span class="s"&gt;C&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# è®¾ç½®ç¼–è¯‘ä¸º C99
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;CMAKE_C_STANDARD&lt;/span&gt; &lt;span class="s"&gt;99&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# è®¾ç½®è¾“å‡ºç›®å½•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;CMAKE_LIBRARY_OUTPUT_DIRECTORY&lt;/span&gt; &lt;span class="o"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;CMAKE_BINARY_DIR&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="s"&gt;/lib&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;CMAKE_RUNTIME_OUTPUT_DIRECTORY&lt;/span&gt; &lt;span class="o"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;CMAKE_BINARY_DIR&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="s"&gt;/bin&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# åˆ›å»ºåŠ¨æ€åº“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;add_library&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;mymath&lt;/span&gt; &lt;span class="s"&gt;SHARED&lt;/span&gt; &lt;span class="s"&gt;mymath.c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;add_executable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;main_exec&lt;/span&gt; &lt;span class="s"&gt;main.c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# é“¾æ¥åŠ¨æ€åº“åˆ°å¯æ‰§è¡Œç¨‹åº
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;target_link_libraries&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;main_exec&lt;/span&gt; &lt;span class="s"&gt;PRIVATE&lt;/span&gt; &lt;span class="s"&gt;mymath&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# è®¾ç½®å¤´æ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;target_include_directories&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;main_exec&lt;/span&gt; &lt;span class="s"&gt;PRIVATE&lt;/span&gt; &lt;span class="o"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;CMAKE_CURRENT_SOURCE_DIR&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id="æ„å»ºæ­¥éª¤åœ¨-linuxmacos-ä¸Š"&gt;æ„å»ºæ­¥éª¤ï¼ˆåœ¨ Linux/macOS ä¸Šï¼‰
&lt;/h4&gt;&lt;p&gt;æ‰“å¼€ç»ˆç«¯ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir build
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; build
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cmake ..
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cmake --build .
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id="è¡Œç¨‹åº"&gt;è¡Œç¨‹åº
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;LD_LIBRARY_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;./lib ./bin/main_exec
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;è¾“å‡º&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Hello from dynamic library!
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;3 + 5 = 8
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="åŠ¨æ€åº“è°ƒç”¨å¤–éƒ¨å‡½æ•°"&gt;åŠ¨æ€åº“è°ƒç”¨å¤–éƒ¨å‡½æ•°
&lt;/h2&gt;&lt;p&gt;&lt;a class="link" href="https://www.cnblogs.com/sewain/p/14798200.html" target="_blank" rel="noopener"
&gt;åº”ç”¨ç¨‹åºè®¾è®¡ï¼šåœ¨åŠ¨æ€åº“ä¸­å¦‚ä½•è°ƒç”¨å¤–éƒ¨å‡½æ•°ï¼Ÿ&lt;/a&gt;&lt;/p&gt;</description></item></channel></rss>